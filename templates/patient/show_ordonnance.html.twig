{% extends 'baseFront.html.twig' %}

{% block title %}
<h1 class="text-2xl font-black text-gray-800 tracking-tight">Prescription M√©dicale üíä</h1>
{% endblock %}

{% block body %}
<div class="px-8 py-8 space-y-10">
    <!-- Back Header -->
    <div class="flex items-center justify-between">
        <a href="{{ path('patient_dossier') }}" class="flex items-center gap-2 text-gray-400 hover:text-indigo-600 transition-all font-black group">
            <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i>
            Retour au dossier
        </a>
        <div class="flex items-center gap-4">
            <button onclick="window.print()" class="px-6 py-3 bg-indigo-50 text-indigo-600 rounded-2xl font-black text-xs hover:bg-indigo-600 hover:text-white transition-all flex items-center gap-2">
                <i class="fa-solid fa-print"></i> Imprimer
            </button>
        </div>
    </div>

    <!-- Ordonnance Design -->
    <div class="bg-white rounded-[3rem] shadow-2xl shadow-indigo-100 border border-indigo-50 p-0 overflow-hidden relative group">
        <!-- Background Elements -->
        <div class="absolute top-0 right-0 w-96 h-96 bg-indigo-50/50 rounded-full blur-3xl -mr-48 -mt-48 pointer-events-none opacity-50"></div>
        <div class="absolute bottom-0 left-0 w-96 h-96 bg-blue-50/50 rounded-full blur-3xl -ml-48 -mb-48 pointer-events-none opacity-50"></div>

        <div class="grid grid-cols-1 lg:grid-cols-5">
            <!-- Summary Sidebar -->
            <div class="lg:col-span-2 bg-indigo-600 p-12 text-white flex flex-col justify-between relative overflow-hidden">
                <div class="relative z-10">
                    <div class="w-20 h-20 bg-white/20 backdrop-blur-md rounded-3xl flex items-center justify-center text-4xl mb-10 shadow-3xl">
                        <i class="fa-solid fa-briefcase-medical"></i>
                    </div>
                    <h2 class="text-xs font-black text-indigo-200 uppercase tracking-widest mb-2">Ordonnance Officielle</h2>
                    <h3 class="text-4xl font-black italic mb-10">R√©capitulatif de votre traitement.</h3>

                    <div class="space-y-8">
                        <div>
                            <p class="text-[10px] font-black text-indigo-300 uppercase tracking-widest mb-2">Dur√©e prescrite</p>
                            <div class="inline-flex items-center gap-3 px-6 py-4 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-sm">
                                <i class="fa-solid fa-hourglass-half text-xl"></i>
                                <p class="text-2xl font-black tracking-tight">{{ ordonnance.dureeTraitement }} <small class="text-xs opacity-60">Jours</small></p>
                            </div>
                        </div>
                        <div>
                            <p class="text-[10px] font-black text-indigo-300 uppercase tracking-widest mb-2">Fr√©quence des prises</p>
                            <p class="text-lg font-bold italic">{{ ordonnance.frequence }}</p>
                        </div>
                    </div>
                </div>

                <div class="relative z-10 pt-16 mt-16 border-t border-white/10">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center">
                            <i class="fa-solid fa-user-doctor text-xl"></i>
                        </div>
                        <div>
                            <p class="text-[10px] font-black text-indigo-300 uppercase tracking-widest">Prescrit par l'h√¥pital</p>
                            <p class="font-black text-lg">Dr. Clinical Team</p>
                        </div>
                    </div>
                </div>
                
                <!-- Floating Deco -->
                <i class="fa-solid fa-heart-pulse absolute -right-10 top-1/2 text-[15rem] text-white/5 pointer-events-none"></i>
            </div>

            <!-- Medicaments List Panel -->
            <div class="lg:col-span-3 p-12 space-y-10 bg-white relative">
                <div class="flex items-center justify-between border-b border-gray-50 pb-8">
                    <h4 class="text-2xl font-black text-gray-800 flex items-center gap-3">
                        <i class="fa-solid fa-pills text-indigo-600"></i>
                        M√©dicaments √† prendre
                    </h4>
                    <span class="bg-indigo-50 text-indigo-600 px-4 py-1 rounded-xl text-xs font-black uppercase tracking-widest">
                        {{ ordonnance.medicaments|length }} Items
                    </span>
                </div>

                <div class="space-y-8">
                    <div>
                        <p class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4 pl-1">Indications Posologiques</p>
                        <div class="p-8 bg-slate-50 rounded-[2.5rem] border border-slate-100 font-bold text-slate-600 italic leading-relaxed text-lg">
                            "{{ ordonnance.posologie }}"
                        </div>
                    </div>

                    <div class="space-y-4">
                        <p class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4 pl-1">D√©tails des sp√©cialit√©s</p>
                        {% for medicament in ordonnance.medicaments %}
                            <div class="flex items-center justify-between p-6 bg-white rounded-3xl border border-gray-50 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all group">
                                <div class="flex items-center gap-5">
                                    <div class="w-14 h-14 bg-slate-50 rounded-2xl flex items-center justify-center text-blue-500 group-hover:scale-110 transition-transform">
                                        <i class="fa-solid fa-capsules text-2xl"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-black text-gray-700 text-lg group-hover:text-indigo-600 transition-colors italic">"{{ medicament.nomMedicament }}"</h5>
                                        <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">{{ medicament.dosage }} ‚Ä¢ {{ medicament.forme }}</p>
                                    </div>
                                </div>
                                <a href="{{ path('patient_medicaments', {search: medicament.nomMedicament}) }}" class="w-10 h-10 bg-gray-50 rounded-xl flex items-center justify-center text-gray-300 hover:text-indigo-500 hover:bg-indigo-50 transition-all">
                                    <i class="fa-solid fa-circle-info"></i>
                                </a>
                            </div>
                        {% else %}
                            <div class="text-center py-10">
                                <p class="text-gray-400 font-bold italic">Aucun d√©tail de m√©dicament sp√©cifique.</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Footer Note -->
                <div class="bg-amber-50 rounded-3xl p-6 flex gap-4 mt-12 border border-amber-100">
                    <i class="fa-solid fa-circle-exclamation text-amber-500 text-xl mt-1"></i>
                    <div>
                        <p class="text-xs font-black text-amber-900 uppercase tracking-widest mb-1">Attention</p>
                        <p class="text-sm text-amber-700 font-medium leading-relaxed">
                            Veuillez pr√©senter cette ordonnance (version num√©rique ou imprim√©e) chez votre pharmacien agr√©√©. Ne stoppez pas le traitement sans avis m√©dical.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
